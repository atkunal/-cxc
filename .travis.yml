language: c
compiler:
 - clang
 - gcc
script: ./configure --with-defaults --with-python-modules --with-security-modules=tsm --with-transports="DTLSUDP TLSTCP" --with-mib-modules="examples/example ucd-snmp/extensible tsm-mib tlstm-mib" --enable-ipv6 --enable-silent-libtool --disable-embedded-perl && make && export PATH="$PWD/agent/.libs:$PWD/apps/.libs:$PWD:$PATH" && export LD_LIBRARY_PATH="$PWD/snmplib/.libs:$PWD/agent/.libs:$PWD/agent/helpers/.libs:$PWD/perl/blib/arch/auto/SNMP:$PWD/perl/blib/arch/auto/NetSNMP/ASN:$PWD/perl/blib/arch/auto/NetSNMP/OID:$PWD/perl/blib/arch/auto/NetSNMP/TrapReceiver:$PWD/perl/blib/arch/auto/NetSNMP/agent:$PWD/perl/blib/arch/auto/NetSNMP/default_store:$PWD/perl/blib/arch/auto/NetSNMP/agent/default_store" && export PERL5LIB="$PWD/perl/blib/lib:$PWD/perl/blib/lib/NetSNMP:$PWD/perl/blib/lib/NetSNMP/agent" && cd testing && ./RUNFULLTESTS -g all && cd ../perl && make test
# We need libperl-dev to build with perl
# and libpython-dev to build with python
# For now we don't attempt to require specific versions.
# (I think we could use a matrix to install different
# versions of perl and python for testing)
# also need openssl for TLS support
before_install:
 - sudo apt-get update -qq
 - sudo apt-get install -qq libperl-dev python2.7-dev libssl-dev
